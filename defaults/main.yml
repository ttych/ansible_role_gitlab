---

want_gitlab: false


gitlab_user: git
gitlab_group: git

gitlab_ce_users:
  - name: git
    comment: git
    group: git
    groups:
    home: "{{ gitlab_git_home|default('/home/git') }}"
    create_home: false
    shell: /usr/sbin/nologin
    uid: 3125
    home_mode: '0700'
    password: '*'

gitlab_ce_groups:
  - { name: git, gid: 3125 }

gitlab_dir: /home/git
gitlab_git_home: "{{ gitlab_dir }}"
gitlab_git_ssh_dir: "{{ gitlab_git_home }}/.ssh"
gitlab_app_dir: "{{ gitlab_dir }}/gitlab"
gitlab_shell_dir: "{{ gitlab_dir }}/gitlab-shell"
gitlab_repositories_dir: "{{ gitlab_dir }}/repositories"
gitlab_distfiles_dir: "{{ gitlab_dir }}/distfiles"
gitlab_tmp_dir: "{{ gitlab_dir }}/tmp"
gitlab_tools_dir: "{{ gitlab_dir }}/tools"
gitlab_tools_git_dir: "{{ gitlab_tools_dir }}/git"
gitlab_tools_ruby_dir: "{{ gitlab_tools_dir }}/ruby"
gitlab_tools_go_dir: "{{ gitlab_tools_dir }}/go"
gitlab_tools_redis_dir: "{{ gitlab_tools_dir }}/redis"

gitlab_directories:
  - { path: "{{ gitlab_git_home }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0700" }
  - { path: "{{ gitlab_git_ssh_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0700" }
  - { path: "{{ gitlab_app_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0750" }
  - { path: "{{ gitlab_shell_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0750" }
  - { path: "{{ gitlab_repositories_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0700" }
  - { path: "{{ gitlab_distfiles_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0755" }
  - { path: "{{ gitlab_tools_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0755" }
  - { path: "{{ gitlab_tmp_dir }}", owner: "{{ gitlab_user }}", group: "{{ gitlab_group }}", mode: "0755" }

gitlab_git_version: 2.25.1
gitlab_git_release: "git-{{ gitlab_git_version }}"
gitlab_git_archive: "{{ gitlab_git_release }}.tar.xz"
gitlab_git_url: "https://mirrors.edge.kernel.org/pub/software/scm/git/{{ gitlab_git_archive }}"

gitlab_ruby_version: 2.6.5
gitlab_ruby_release: "ruby-{{ gitlab_ruby_version }}"
gitlab_ruby_archive: "{{ gitlab_ruby_release }}.tar.xz"
gitlab_ruby_url: "https://cache.ruby-lang.org/pub/ruby/{{ gitlab_ruby_version.split('.')[0:2] | join('.') }}/{{ gitlab_ruby_archive }}"

gitlab_go_version: 1.13.8
gitlab_go_arch: "{{ ansible_architecture | regex_replace('x86_64', 'amd64') }}"
gitlab_go_release: "go{{ gitlab_go_version }}.{{ ansible_system | lower }}-{{ gitlab_go_arch }}"
gitlab_go_archive: "{{ gitlab_go_release }}.tar.gz"
gitlab_go_url: "https://dl.google.com/go/{{ gitlab_go_archive }}"

gitlab_make: make

gitlab_postgresql_owner: postgres
gitlab_postgresql_db: gitlabhq_production
gitlab_postgresql_user: "{{ gitlab_user }}"

gitlab_redis_version: 5.0.7
gitlab_redis_release: "redis-{{ gitlab_redis_version }}"
gitlab_redis_archive: "{{ gitlab_redis_release }}.tar.gz"
gitlab_redis_url: "http://download.redis.io/releases/{{ gitlab_redis_archive }}"
